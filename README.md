# 短信发送平台项目介绍

## 项目概述

该项目是一个短信发送平台，旨在为客户提供便捷的短信发送服务。客户通过平台发送短信，系统与运营商及其他短信平台进行交互，完成短信的发送。

## 项目角色

该平台充当客户与运营商之间的桥梁，客户通过接口发送短信，系统负责处理和发送请求。

## 技术选型

项目采用微服务架构，主要技术栈包括：
- Spring Cloud Alibaba：用于微服务管理和服务发现
- RabbitMQ：作为消息队列，处理异步消息
- Redis：用于缓存和数据存储
- Elasticsearch (ES)：用于短信记录的存储与搜索
- MySQL：关系型数据库，用于存储用户信息、短信记录等核心数据
- MyBatis-Plus：用于简化 MySQL 数据库操作，提供更高效的 CRUD 操作

## 核心功能

1. 多种短信发送方式：
   - 单条短信发送
   - 多条短信批量发送
   - 基于模板的单条发送
   - 基于模板的批量发送

2. 接口校验：
   - apiKey 校验
   - IP 白名单
   - 签名和模板校验
   - 手机号码校验

3. 消息处理流程：
   - 经过接口模块和策略模块的校验后，通过 MQ 将消息发送至短信网关模块
   - 短信网关模块与运营商对接，完成短信发送，并记录发送状态

4. 状态报告：
   - 短信发送的最终状态通过 HTTP 请求推送给客户

## 难点与亮点

### 一、校验设计

- 动态可插拔的校验机制：通过责任链模式实现校验解耦，支持客户自定义校验策略

### 二、敏感词校验

- 使用 DFA 算法优化敏感词校验，提升性能并减少网络成本。敏感词存储在 Redis 中，以提高匹配效率

### 三、限流校验

- 采用 Redis 的 ZSet 结构实现灵活的限流机制，支持多种限流策略，确保同一客户在规定时间内发送短信不超过限制

### 四、搜索模块

- 基于 Elasticsearch 设计短信发送记录的存储与查询，支持高效的全文检索，满足客户对历史发送记录的查询需求

### 五、短信网关模块

- 使用 Netty 实现与运营商的高效对接，支持多线程处理回调，提高系统吞吐量。短信内容和相关信息通过指定的方法推送给运营商，并接收回调

## 其他技术要点

- 数据同步：使用 Canal 进行 MySQL 数据同步，确保数据一致性并避免脏数据
- CI/CD：基于 Kubernetes 进行部署，支持自动化构建与发布，提升开发效率
- MySQL 和 MyBatis-Plus：使用 MyBatis-Plus 简化 MySQL 操作，提供高效的 CRUD 操作，减少开发时间和维护成本


## 性能指标

- 当前项目 QPS 峰值约 300，平时在 50-60 之间
